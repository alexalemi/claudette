#!/bin/bash
#
# ask-claude - Open a question in Claude AI via your web browser
#
# DESCRIPTION:
#   A utility script to quickly ask Claude AI questions from the command line.
#   Opens either Claude (claude.ai) or Claude Code (claude.ai/code) in your
#   default browser with your question pre-filled.
#
# USAGE:
#   ask-claude [OPTIONS] [QUESTION]
#
# OPTIONS:
#   -c, --code    Open in Claude Code instead of regular Claude
#
# EXAMPLES:
#   ask-claude "What is the capital of France?"
#   ask-claude -c "Help me debug this Python script"
#   ask-claude                                        # Opens GUI prompt
#
# DEPENDENCIES:
#   - jq (for URL encoding)
#   - xdg-open (for opening browser on Linux)
#   - zenity (optional, for GUI prompt when no question provided)
#

# Parse flags
use_code=false
while [[ "$1" == -* ]]; do
    case "$1" in
        -c|--code) use_code=true; shift ;;
        *) shift ;;
    esac
done

# Get question from argument or prompt
question="$*"
if [ -z "$question" ]; then
    question=$(zenity --entry --title="Ask Claude" --text="Enter your question:" --width=400 2>/dev/null)
    [ -z "$question" ] && exit 0
fi

# URL-encode the question and open browser
encoded=$(printf '%s' "$question" | jq -sRr @uri)
if $use_code; then
    xdg-open "https://claude.ai/code?q=${encoded}"
else
    xdg-open "https://claude.ai/new?q=${encoded}"
fi
